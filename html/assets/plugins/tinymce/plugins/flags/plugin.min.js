!function(){let flags=function(){"use strict";tinymce.PluginManager.add("flags",(function(editor,url){return editor.ui.registry.addAutocompleter("autocompleter-flags",{ch:"@",minChars:2,columns:1,fetch:function(pattern){return new tinymce.util.Promise((function(resolve){fetch("https://restcountries.eu/rest/v2/name/"+pattern+"?fields=name;flag").then(resp=>resp.json()).then((function(data){let results=[];for(let i=0;i<data.length;i++){let result=data[i];results.push({value:result.name+"|"+result.flag,text:result.name,icon:'<img src="'+result.flag+'" width="28" height="14" style="width:28px; height:14px;">'})}results.sort((function(a,b){let x=a.text.toLowerCase(),y=b.text.toLowerCase();return x<y?-1:x>y?1:0})),resolve(results)}))}))},onAction:function(autocompleteApi,rng,value){let parts=value.split("|"),name=parts[0],flag,img='<img src="'+parts[1]+'" alt="'+name+'" width="48" height="24">';editor.selection.setRng(rng),editor.insertContent(img),autocompleteApi.hide()}}),{getMetadata:function(){return{name:"Flags Autocompleter example",url:"https://www.martyfriedel.com/blog/tinymce-5-creating-an-autocomplete-plugin"}}}}))}()}();